<div *ngIf="testingMode" class="container-fluid links-height-100">
    <div class="row flex-items-xs-middle flex-items-xs-center links-height-100">
        <div class="col-xs-12 text-xs-center">
            <i class="fa fa-link fa-5x" aria-hidden="true" (dblclick)="cancelTestingMode($event)"></i>
            <h2>{{'Site is under construction' | translate}}</h2>
            <h2>{{'Please come later' | translate}}</h2>
        </div>
    </div>
</div>

<div [hidden]="testingMode" class="links-height-100">
    <nav id="linksNavbar" class="navbar navbar-light navbar-fixed-top bg-faded links-navbar-height" 
         [style.display]="navbarVisible ? '' : 'none'"
         >
        <button type="button" class="close" aria-label="Close" (click)="toggleNavbar(false)">
            <span aria-hidden="true">&times;</span>
        </button>
        <a class="navbar-brand" href="#" [routerLink]="['/home']">
            <i class="fa fa-link hidden-sm-up" aria-hidden="true" title="Links And News"></i>
            <i class="fa fa-link fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="Links And News"></i>
            <i class="fa fa-link fa-ajust hidden-md-down" aria-hidden="true"></i>
            <span class="hidden-md-down">Links And News</span>
        </a>

        <ul id="menuList" class="nav navbar-nav float-xs-right">
            <li *ngIf="editablePageShown" class="nav-item dropdown">
                <button class="btn btn-link nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-file-text-o hidden-sm-up" aria-hidden="true" title="{{'Page' | translate}}"></i>
                    <i class="fa fa-file-text-o fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'Page' | translate}}"></i>
                    <i class="fa fa-file-text-o fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'Page' | translate}}</span>
                </button>
                <div class="dropdown-menu">
                    <button *ngIf="editPageAllowed" class="btn btn-link dropdown-item" (click)="toggleEditMode()">
                        {{(activeComponent.editMode ? 'leave edit mode.Leave edit mode' : 'Edit') | translate}}
                    </button>
                    <button *ngIf="add2MyPagesAllowed" class="btn btn-link dropdown-item" (click)="add2MyPages()">
                        {{'Add to My Pages' | translate}}
                    </button>
                    <button class="btn btn-link dropdown-item" (click)="copy2MyPages()">
                        {{'Copy to My Pages' | translate}}
                    </button>
                </div>
            </li>
            <li *ngIf="!activeComponentOf('MyPagesComponent')" class="nav-item">
                <a href="#" [routerLink]="['/myPages']" class="nav-link">
                    <i class="fa fa-columns hidden-sm-up" aria-hidden="true" title="{{'My Pages' | translate}}"></i>
                    <i class="fa fa-columns fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'My Pages' | translate}}"></i>
                    <i class="fa fa-columns fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'My Pages' | translate}}</span>
                </a>
            </li>
            <li *ngIf="activeComponentOf('MyPagesComponent')" class="nav-item dropdown">
                <button class="btn btn-link nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-columns hidden-sm-up" aria-hidden="true" title="{{'My Pages' | translate}}"></i>
                    <i class="fa fa-columns fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'My Pages' | translate}}"></i>
                    <i class="fa fa-columns fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'My Pages' | translate}}</span>
                </button>

                <div *ngIf="editPageListAllowed" class="dropdown-menu">
                    <button class="btn btn-link  dropdown-item" (click)="toggleEditMode()">
                        {{(activeComponent.editMode ? 'leave edit mode.Leave edit mode' : 'Edit') | translate}}
                    </button>
                    <button class="btn btn-link  dropdown-item" (click)="createPage()">
                        {{'Add' | translate}}
                    </button>
                    <div class="dropdown-divider"></div>
                    <button class="btn btn-link  dropdown-item {{getViewMode() === 1 ? 'active' : ''}}" (click)="setViewMode(1)">
                        {{'List' | translate}}
                    </button>
                    <button class="btn btn-link  dropdown-item {{getViewMode() === 2 ? 'active' : ''}}" (click)="setViewMode(2)">
                        {{'Tile' | translate}}
                    </button>
                </div>
            </li>
            <li *ngIf="!activeComponentOf('CategoriesComponent') || (activeComponentOf('CategoriesComponent') && 
                activeComponent.categoryName === 'all')" class="nav-item">
                <a href="#" [routerLink]="['/categories/all']" class="nav-link">
                    <i class="fa fa-tasks hidden-sm-up" aria-hidden="true" title="{{'Categories' | translate}}"></i>
                    <i class="fa fa-tasks fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'Categories' | translate}}"></i>
                    <i class="fa fa-tasks fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'Categories' | translate}}</span>
                </a>
            </li>
            <li *ngIf="activeComponentOf('CategoriesComponent') && 
                activeComponent.categoryName !== 'all'" class="nav-item dropdown">
                <button class="btn btn-link nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-tasks hidden-sm-up" aria-hidden="true" title="{{'Categories' | translate}}"></i>
                    <i class="fa fa-tasks fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'Categories' | translate}}"></i>
                    <i class="fa fa-tasks fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'Categories' | translate}}</span>
                </button>
                <div class="dropdown-menu">
                    <button class="btn btn-link  dropdown-item {{getViewMode() === 1 ? 'active' : ''}}" (click)="setViewMode(1)">
                        {{'List' | translate}}
                    </button>
                    <button class="btn btn-link  dropdown-item {{getViewMode() === 2 ? 'active' : ''}}" (click)="setViewMode(2)">
                        {{'Tile' | translate}}
                    </button>
                </div>
            </li>

            <li *ngIf="!activeComponentOf('NewsComponent') || (activeComponentOf('NewsComponent') &&
                activeComponent.sourceId === 'sources')" class="nav-item">
                <a href="#" [routerLink]="['/news/sources']" class="nav-link">
                    <i class="fa fa-newspaper-o hidden-sm-up" aria-hidden="true" title="{{'News' | translate}}"></i>
                    <i class="fa fa-newspaper-o fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'News' | translate}}"></i>
                    <i class="fa fa-newspaper-o fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'News' | translate}}</span>
                </a>
            </li>
            <li *ngIf="activeComponentOf('NewsComponent') && activeComponent.sourceId !== 'sources'" class="nav-item dropdown">
                <button class="btn btn-link nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-newspaper-o hidden-sm-up" aria-hidden="true" title="{{'News' | translate}}"></i>
                    <i class="fa fa-newspaper-o fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'News' | translate}}"></i>
                    <i class="fa fa-newspaper-o fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'News' | translate}}</span>
                </button>
                <div class="dropdown-menu">
                    <button class="btn btn-link  dropdown-item {{getViewMode() === 1 ? 'active' : ''}}" (click)="setViewMode(1)">
                        {{'List' | translate}}
                    </button>
                    <button class="btn btn-link  dropdown-item {{getViewMode() === 2 ? 'active' : ''}}" (click)="setViewMode(2)">
                        {{'Tile' | translate}}
                    </button>
                </div>
            </li>

            <li class="nav-item">
                <a href="#" [routerLink]="['/help']" class="nav-link">
                    <i class="fa fa-question-circle hidden-sm-up" aria-hidden="true" title="{{'Help' | translate}}"></i>
                    <i class="fa fa-question-circle fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'Help' | translate}}"></i>
                    <i class="fa fa-question-circle fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'Help' | translate}}</span>
                </a>
            </li>
            <li *ngIf="!account && accountService.languages && accountService.languages.length > 0"
                class="nav-item dropdown">
                <button class="btn btn-link nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-language hidden-sm-up" aria-hidden="true" title="{{'Language' | translate}}"></i>
                    <i class="fa fa-language fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{'Language' | translate}}"></i>
                    <i class="fa fa-language fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{'Language' | translate}}</span>
                </button>
                <div class="dropdown-menu">
                    <button *ngFor="let language of accountService.languages"
                            class="btn btn-link dropdown-item {{language.code === currentLanguageCode ? 'active' : ''}}"
                            (click)="translate.use(language.code);">
                        {{language.name | translate}}
                    </button>
                </div>
            </li>
            <li class="nav-item dropdown">
                <button class="btn btn-link nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-user hidden-sm-up" aria-hidden="true" title="{{account ? account.login : 'Account' | translate}}"></i>
                    <i class="fa fa-user fa-2x hidden-xs-down hidden-lg-up" aria-hidden="true" title="{{account ? account.login : 'Account' | translate}}"></i>
                    <i class="fa fa-user fa-ajust hidden-md-down" aria-hidden="true"></i>
                    <span class="hidden-md-down">{{account ? utilityService.loginToEllipsis(account.login) : 'Account' | translate}}</span>
                </button>

                <div class="dropdown-menu dropdown-menu-right">
                    <a *ngIf="account" class="dropdown-item" href="#" [routerLink]="['/account']">
                        <i class="fa fa-user fa-ajust" aria-hidden="true"></i>
                        {{'My Account' | translate}}
                    </a>
                    <a *ngIf="!account" class="dropdown-item" href="#" [routerLink]="['/login']">
                        <i class="fa fa-sign-in fa-ajust" aria-hidden="true"></i>
                        {{'Log in' | translate}}
                    </a>
                    <a *ngIf="!account" class="dropdown-item" href="#" [routerLink]="['/register']">
                        <i class="fa fa-registered fa-ajust" aria-hidden="true"></i>
                        {{'Register' | translate}}
                    </a>
                    <button *ngIf="account" class="btn btn-link dropdown-item" (click)="logUserOut();">
                        <i class="fa fa-sign-out fa-ajust" aria-hidden="true"></i>
                        {{'Log out' | translate}}
                    </button>
                </div>
            </li>
        </ul>
    </nav>
    <div *ngIf="wait" class="container-fluid links-height-100">
        <div class="row flex-items-xs-middle flex-items-xs-center links-height-100">
            <div class="col-xs-12 text-xs-center">
                <h5>{{'Loading...' | translate}}</h5>
                <br />
                <i class="fa fa-spinner fa-pulse fa-4x fa-fw"></i>
            </div>
        </div>
    </div>
    <div [hidden]="wait" class="container-fluid links-height-100" (window:resize)="onWindowResize()">
        <div class="row links-height-100" >
            <div class="col-md-12 links-height-100"
                 [style.padding-top]="navbarHeight  + 'px'"
                 [hidden]="wait">
                <div [style.height]="contentHeight > 0 ? contentHeight  + 'px' : ''">
                    <router-outlet></router-outlet>
                </div>

            </div>
        </div>
    </div>

    <messenger-placeholder #messengerComponent></messenger-placeholder>
    <wait-placeholder #waitComponent></wait-placeholder>

    <div #navbarToggler class="links-toggler" style="top: 10px"
         [style.display]="navbarVisible ? 'none' : ''"
         [style.left]="navbarTogglerLeft + 'px'"
         (click)="toggleNavbar(true)">

        <span class="links-icon-bar"></span>
        <span class="links-icon-bar"></span>
        <span class="links-icon-bar"></span>
    </div>
</div>
